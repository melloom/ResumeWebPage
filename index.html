<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Favicon references - ICO + PNG for best compatibility -->
    <link rel="icon" href="/favicon.ico" sizes="any" />
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#6366f1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Melvin Peralta" />
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="description" content="Melvin Peralta - Developer portfolio showcasing modern web applications built with React, JavaScript, and innovative technologies." />

    <!-- Theme initialization script - prevents flash of wrong theme -->
    <script>
      (function() {
        try {
          // Get theme from localStorage or use dark as default
          const savedTheme = localStorage.getItem('theme') || 'dark';
          // Apply theme immediately to prevent flash
          document.documentElement.setAttribute('data-theme', savedTheme);
          // Save the preference for consistency
          localStorage.setItem('theme', savedTheme);
          
          // Add a flag to prevent service worker from overriding theme
          window.__THEME_INITIALIZED__ = true;
          
          // Force dark mode styles immediately to prevent gray flash
          if (savedTheme === 'dark') {
            document.documentElement.style.colorScheme = 'dark';
            // Add inline style to ensure dark background immediately
            const style = document.createElement('style');
            style.textContent = `
              body { 
                background-color: #0f172a !important; 
                color: #ffffff !important;
              }
            `;
            document.head.appendChild(style);
          }
        } catch (e) {
          // Fallback to dark theme if localStorage fails
          document.documentElement.setAttribute('data-theme', 'dark');
          console.error('Theme initialization error:', e);
        }
      })();
    </script>

    <!-- Add inline styles to ensure the page isn't blank during loading -->
    <style>
      body {
        background-color: #0f172a;
        color: #ffffff;
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, sans-serif;
      }
      #root {
        min-height: 100vh;
      }
      
      /* Add conditional styling for light mode */
      html[data-theme="light"] body {
        background-color: #f8fafc;
        color: #1e293b;
      }
      
      /* Safe area handling for mobile PWA */
      .safe-area-top {
        height: env(safe-area-inset-top);
        background-color: var(--bg-color, #0f172a);
      }
      
      html[data-theme="light"] .safe-area-top {
        background-color: #f8fafc;
      }
    </style>

    <!-- Preload critical assets - only essential ones -->
    <link rel="preload" href="/photo-1.jpg" as="image" type="image/jpeg" importance="high" />
    <link rel="preload" href="/assets/index-GUW53mwX.js" as="script" importance="high" />
    <link rel="preload" href="/assets/vendor-BoHiCxuW.js" as="script" importance="high" />

    <title>Melvin Peralta - Portfolio</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
